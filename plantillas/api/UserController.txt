<?php

namespace App\Http\Controllers\API;

use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class UserController extends BaseApiController {

    public function login() {

        if (Auth::attempt(['username' => request('username'), 'password' => request('password')])) {

            $user = Auth::user();
            $success['token'] = $user->createToken('MyApp')->accessToken;

            return $this->sendResponse($success, 'Iniciado sesi贸n correctamente');

        } else {
            return $this->sendError([], 'Error al iniciar sesi贸n', 401);
        }
    }

    public function logout(Request $request) {

        $isUser = $request->user()->token()->revoke();

        if ($isUser) {
            return $this->sendResponse([], 'Cerrado sesi贸n correctamente');
        } else {
            return $this->sendError([], 'Error al cerrar sesi贸n');
        }

    }
}
